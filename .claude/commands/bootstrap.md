# Bootstrap Command

**Version**: 1.0.0
**Last Updated**: December 21, 2025
**Status**: Active
**Purpose**: One-command setup for any codebase - scans, documents, and enables sprint planning

---

## IMPORTANT: This is an AUTOMATED DISCOVERY & SETUP WORKFLOW

**Claude MUST execute each phase sequentially. This command transforms any codebase into a fully governed, documented project ready for sprint planning.**

---

## When to Use

Use `/bootstrap` when:
- **Porting** the `.claude` framework to an existing codebase
- **Onboarding** to a new project that needs documentation
- **Discovering** a codebase you're unfamiliar with
- **Generating** initial product backlog from code analysis
- **Starting** development work on an undocumented project

**Use `/setup` instead if**:
- Starting a brand new empty project
- Only need folder structure without code analysis

---

## PHASE 0: PRE-FLIGHT VALIDATION

### Step 0.1: Verify .claude Portability Kit

```bash
# Check if portable files exist in current project
ls -la .claude/DOCUMENT_STANDARDS.md 2>/dev/null
ls -la .claude/templates/ 2>/dev/null
ls -la .claude/commands/ 2>/dev/null
```

**If missing**: Copy from source project or create from templates

### Step 0.2: Detect Existing Documentation

```bash
# Check for existing docs
find . -name "*.md" -type f | head -20
find . -name "README*" -type f | head -10
```

**Record findings for Phase 2 integration**

---

## PHASE 1: CODEBASE DISCOVERY

### Step 1.1: Technology Stack Detection

```bash
# Detect package managers and languages
ls package.json 2>/dev/null && echo "Node.js detected"
ls go.mod 2>/dev/null && echo "Go detected"
ls requirements.txt 2>/dev/null && echo "Python detected"
ls Cargo.toml 2>/dev/null && echo "Rust detected"
ls pom.xml 2>/dev/null && echo "Java/Maven detected"
ls build.gradle 2>/dev/null && echo "Java/Gradle detected"
ls Gemfile 2>/dev/null && echo "Ruby detected"
ls composer.json 2>/dev/null && echo "PHP detected"

# Detect frameworks
grep -l "react\|vue\|angular\|svelte" package.json 2>/dev/null
grep -l "express\|fastify\|nest\|koa" package.json 2>/dev/null
grep -l "django\|flask\|fastapi" requirements.txt 2>/dev/null
```

**Create tech stack summary**

### Step 1.2: Service/Module Discovery

```bash
# Find service directories
find . -maxdepth 3 -name "package.json" -o -name "go.mod" -o -name "main.go" -o -name "app.py" | head -20

# Find Docker services
ls docker-compose.yml 2>/dev/null && cat docker-compose.yml | grep "services:" -A 50
ls Dockerfile* 2>/dev/null

# Find configuration files
find . -name "*.env*" -o -name "config.*.js" -o -name "*.config.js" | head -15
```

### Step 1.3: API Endpoint Discovery

```bash
# Express.js routes
grep -r "app\.\(get\|post\|put\|delete\|patch\)" --include="*.js" --include="*.ts" | head -30

# Go routes
grep -r "HandleFunc\|Handle\|router\." --include="*.go" | head -30

# Python routes
grep -r "@app\.\(get\|post\|put\|delete\|route\)" --include="*.py" | head -30

# Find route files
find . -name "*route*" -o -name "*router*" -o -name "*endpoint*" | head -20
```

### Step 1.4: Data Model Discovery

```bash
# Find schema/model files
find . -name "*model*" -o -name "*schema*" -o -name "*entity*" | head -20

# Find database connections
grep -r "mongoose\|sequelize\|prisma\|typeorm\|knex" --include="*.js" --include="*.ts" | head -10

# Find SQL files
find . -name "*.sql" | head -10
```

### Step 1.5: Test Coverage Discovery

```bash
# Find test files
find . -name "*test*" -o -name "*spec*" -o -name "__tests__" | head -20

# Check test configuration
ls jest.config.* 2>/dev/null
ls vitest.config.* 2>/dev/null
ls pytest.ini 2>/dev/null
```

### Step 1.6: TODO/FIXME Discovery (Backlog Source)

```bash
# Find TODOs and FIXMEs in code
grep -rn "TODO\|FIXME\|HACK\|XXX\|BUG" --include="*.js" --include="*.ts" --include="*.go" --include="*.py" | head -50
```

---

## PHASE 2: GENERATE CODEBASE_STRUCTURE.md

### Step 2.1: Create Comprehensive Structure Map

**Template:**

```markdown
# Codebase Structure

**Version**: 1.0.0
**Last Updated**: [DATE]
**Generated By**: /bootstrap
**Status**: Active

---

## Technology Stack

| Category | Technology | Version |
|----------|------------|---------|
| Language | [detected] | [version] |
| Framework | [detected] | [version] |
| Database | [detected] | [version] |
| Infrastructure | [detected] | - |

---

## Service Architecture

| Service | Port | Technology | Purpose |
|---------|------|------------|---------|
| [name] | [port] | [tech] | [purpose] |

---

## Directory Structure

```
[PROJECT_ROOT]/
├── [folder]/ - [purpose]
│   ├── [subfolder]/
│   └── [files]
└── ...
```

---

## API Endpoints

| Method | Path | Handler | Purpose |
|--------|------|---------|---------|
| [GET/POST] | [path] | [file:line] | [purpose] |

---

## Data Models

| Model | Location | Fields | Relations |
|-------|----------|--------|-----------|
| [name] | [file] | [count] | [relations] |

---

## Test Coverage

| Category | Files | Framework |
|----------|-------|-----------|
| Unit | [count] | [jest/pytest/etc] |
| Integration | [count] | [framework] |
| E2E | [count] | [framework] |

---

## Quick Reference

| Task | Command | Location |
|------|---------|----------|
| Start dev | [command] | [file] |
| Run tests | [command] | [file] |
| Build | [command] | [file] |
| Deploy | [command] | [file] |
```

---

## PHASE 3: GENERATE PRODUCT BACKLOG

### Step 3.1: Extract Backlog Items from Code

**Sources:**
1. TODO/FIXME comments from code
2. Incomplete features (empty handlers, stub functions)
3. Missing test coverage
4. Missing documentation
5. Security gaps (hardcoded secrets, missing validation)

### Step 3.2: Create INITIAL_BACKLOG.md

**Location**: `IBRAIN_STRATEGY/3-DELIVERY/sprints/INITIAL_BACKLOG.md`

```markdown
# Initial Product Backlog

**Version**: 1.0.0
**Generated**: [DATE]
**Generated By**: /bootstrap
**Status**: Draft (T4)

---

## Overview

This backlog was auto-generated by analyzing the codebase. Items are categorized by priority and type.

---

## P0: Critical/Blocking

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B001 | [Bug/Feature/Tech Debt] | [description] | [TODO/Analysis] | [file:line] |

---

## P1: High Priority

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B00X | [type] | [description] | [source] | [location] |

---

## P2: Medium Priority

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B00X | [type] | [description] | [source] | [location] |

---

## P3: Low Priority / Nice to Have

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B00X | [type] | [description] | [source] | [location] |

---

## Categories

### Technical Debt
- [items from TODO/FIXME with "refactor", "cleanup", "tech debt"]

### Missing Tests
- [files/functions without test coverage]

### Missing Documentation
- [undocumented APIs, missing README files]

### Security
- [hardcoded values, missing validation, exposed secrets]

### Features
- [incomplete implementations, stubs]

---

## Sprint Planning Notes

Based on analysis, recommended first sprint focus:
1. [P0 items]
2. [Critical P1 items]
3. [Foundation work needed]

---

**Document Status**: T4 Working Draft - Review and prioritize before sprint planning
```

---

## PHASE 4: SETUP GOVERNANCE STRUCTURE

### Step 4.1: Create Strategy Folder Structure

```bash
# Create IBRAIN_STRATEGY structure (or [PROJECT]_STRATEGY)
mkdir -p [PROJECT]_STRATEGY/1-PRODUCT/strategy/{00-constitutional,01-authoritative,02-master,03-engines,04-vision,05-governance}
mkdir -p [PROJECT]_STRATEGY/2-TECHNICAL/{architecture,api-specs,data-models}
mkdir -p [PROJECT]_STRATEGY/3-DELIVERY/{sprints,releases,handoffs,archive}
mkdir -p [PROJECT]_STRATEGY/3-DELIVERY/archive/{strategy,sprints,releases,handoffs,bugs,audits,tests}
```

### Step 4.2: Create Implementation Folder Structure

```bash
# Create IBRAIN_IMPLEMENTATION structure
mkdir -p [PROJECT]_IMPLEMENTATION/1-SERVICES
mkdir -p [PROJECT]_IMPLEMENTATION/2-ENGINES
mkdir -p [PROJECT]_IMPLEMENTATION/3-TESTING
mkdir -p [PROJECT]_IMPLEMENTATION/4-SDK
```

### Step 4.3: Create MVG (Minimum Viable Governance)

**Copy from template and customize:**

```bash
# Use MVG_TEMPLATE.md from .claude/templates/
cp .claude/templates/MVG_TEMPLATE.md [PROJECT]_STRATEGY/1-PRODUCT/strategy/00-constitutional/MVG_[PROJECT].md
```

**Customize with discovered project info**

### Step 4.4: Create Master Index Files

Create `00_MASTER_INDEX.md` for both STRATEGY and IMPLEMENTATION folders with links to all sections.

---

## PHASE 5: POPULATE GOVERNANCE DOCUMENTS

### Step 5.1: Create CANONICAL_SOURCE_REGISTRY.md

Based on discovered services, models, and APIs:

```markdown
# Canonical Source Registry

**Doc ID**: DOC-T2-DOC-001

---

## Domains and Canonical Sources

| Domain | Canonical Source | Location |
|--------|------------------|----------|
| [DOMAIN] | [document] | [path] |
```

### Step 5.2: Create DOCUMENT_REGISTRY.md

Track all created documents with versions and Doc IDs.

### Step 5.3: Create DOC_ID_REGISTRY.md

Assign Doc IDs to all created strategy documents.

---

## PHASE 6: GENERATE README FILES

### Step 6.1: Create Folder READMEs

For each created folder, generate README.md using `README_TEMPLATE.md`:
- Purpose of folder
- Contents table
- Session Seal
- Navigation links

### Step 6.2: Update/Create Project README

If root README.md exists:
- Add `.claude` section explaining governance
- Add links to strategy documentation
- Add development commands

If missing:
- Create from project info discovered in Phase 1

---

## PHASE 7: VERIFICATION & REPORT

### Step 7.1: Verification Checklist

```
CODEBASE DISCOVERY
[ ] Tech stack identified
[ ] Services mapped
[ ] APIs documented
[ ] Data models cataloged
[ ] Tests inventoried
[ ] TODOs extracted

GOVERNANCE SETUP
[ ] Strategy folder structure created
[ ] Implementation folder structure created
[ ] MVG document created
[ ] Canonical Source Registry created
[ ] Document Registry created
[ ] Doc ID Registry created

BACKLOG GENERATION
[ ] INITIAL_BACKLOG.md created
[ ] Items categorized by priority
[ ] Items categorized by type
[ ] Sprint planning notes added

DOCUMENTATION
[ ] CODEBASE_STRUCTURE.md created/updated
[ ] All folder READMEs created
[ ] Session Seals added
[ ] Project README updated
```

### Step 7.2: Generate Bootstrap Report

```markdown
## /bootstrap Complete

**Project**: [PROJECT_NAME]
**Date**: [DATE]
**Duration**: [time]

### Discovery Summary

| Category | Count |
|----------|-------|
| Services | [N] |
| Endpoints | [N] |
| Models | [N] |
| Tests | [N] |
| TODOs Found | [N] |

### Documents Created

| Document | Location | Doc ID |
|----------|----------|--------|
| [name] | [path] | [id] |

### Backlog Summary

| Priority | Count |
|----------|-------|
| P0 Critical | [N] |
| P1 High | [N] |
| P2 Medium | [N] |
| P3 Low | [N] |
| **Total** | **[N]** |

### Ready for Sprint Planning

The codebase is now fully documented and ready for sprint planning:

1. Review `INITIAL_BACKLOG.md` and adjust priorities
2. Run `/init` to start a session
3. Run `/strategy` for sprint planning
4. Begin development with `/coding`

### Next Steps

1. [ ] Review and customize MVG document
2. [ ] Review INITIAL_BACKLOG.md priorities
3. [ ] Create first sprint plan
4. [ ] Run `/audit` after first sprint
```

---

## PORTABILITY KIT

### Files Required for Porting

When porting `.claude` to a new project, copy these files:

```
.claude/
├── DOCUMENT_STANDARDS.md      # REQUIRED - All governance rules
├── BEST_PRACTICES.md          # REQUIRED - Quality standards
├── MASTER_GUIDE.md            # REQUIRED - File placement rules
│
├── commands/                   # REQUIRED - All commands
│   ├── init.md
│   ├── close.md
│   ├── bootstrap.md           # This file
│   ├── setup.md
│   ├── strategy.md
│   ├── coding.md
│   ├── audit.md
│   ├── testing.md
│   └── general.md
│
├── templates/                  # REQUIRED - All templates
│   ├── MVG_TEMPLATE.md
│   ├── README_TEMPLATE.md
│   ├── GENOME_TEMPLATE.md
│   ├── SESSION_SEAL_TEMPLATE.md
│   ├── STRATEGY_FULL_TEMPLATE.md
│   ├── STRATEGY_DERIVED_TEMPLATE.md
│   ├── WORKING_DOC_TEMPLATE.md
│   ├── OPERATIONAL_TEMPLATE.md
│   └── COMMAND_TEMPLATE.md
│
└── ACCESS_CONTROL.yaml         # OPTIONAL - Copy if using Doc ID system
```

### Files to Create Fresh (Project-Specific)

```
.claude/
├── README.md                  # Generate from template
├── SESSION_LOG.md             # Start empty
├── CHANGE_LOG.md              # Start empty
├── DOCUMENT_REGISTRY.md       # Generate from /bootstrap
├── CODEBASE_STRUCTURE.md      # Generate from /bootstrap
├── DATA_STRUCTURE.md          # Generate from /bootstrap
├── project.yaml               # Generate from /bootstrap
│
├── sessions/                  # Start empty
└── archives/                  # Start empty
```

### One-Command Port

```bash
# From source project
cd /path/to/source/project

# Create portable bundle
tar -cvf bramhi-kit.tar \
  .claude/DOCUMENT_STANDARDS.md \
  .claude/BEST_PRACTICES.md \
  .claude/MASTER_GUIDE.md \
  .claude/ACCESS_CONTROL.yaml \
  .claude/commands/ \
  .claude/templates/

# In target project
cd /path/to/target/project
tar -xvf /path/to/bramhi-kit.tar

# Run bootstrap
# /bootstrap
```

---

## QUICK REFERENCE

```
/bootstrap
   │
   ├─► Phase 0: Pre-flight validation
   │      └─► Check .claude portability kit exists
   │
   ├─► Phase 1: Codebase discovery
   │      ├─► Tech stack detection
   │      ├─► Service/module discovery
   │      ├─► API endpoint discovery
   │      ├─► Data model discovery
   │      ├─► Test coverage discovery
   │      └─► TODO/FIXME extraction
   │
   ├─► Phase 2: Generate CODEBASE_STRUCTURE.md
   │      └─► Comprehensive architecture map
   │
   ├─► Phase 3: Generate product backlog
   │      └─► INITIAL_BACKLOG.md with priorities
   │
   ├─► Phase 4: Setup governance structure
   │      ├─► Strategy folders (6 tiers)
   │      ├─► Implementation folders
   │      └─► MVG document
   │
   ├─► Phase 5: Populate governance docs
   │      ├─► Canonical Source Registry
   │      ├─► Document Registry
   │      └─► Doc ID Registry
   │
   ├─► Phase 6: Generate README files
   │      └─► All folder READMEs + Project README
   │
   └─► Phase 7: Verification & report
          └─► Bootstrap complete summary
```

---

## DIFFERENCES: /bootstrap vs /setup

| Aspect | /bootstrap | /setup |
|--------|------------|--------|
| **Use Case** | Existing codebase | New empty project |
| **Discovery** | Scans code, extracts info | None |
| **Backlog** | Auto-generates from TODOs | None |
| **Structure** | Creates based on discovery | Creates from config |
| **Time** | 5-15 minutes | 2-5 minutes |
| **Output** | Full documentation + backlog | Empty structure |

---

## SUCCESS CRITERIA

After `/bootstrap` completes:

1. ✅ CODEBASE_STRUCTURE.md accurately reflects the codebase
2. ✅ INITIAL_BACKLOG.md contains actionable items
3. ✅ Strategy folder has correct tier structure
4. ✅ MVG document exists and is customizable
5. ✅ All governance documents are in place
6. ✅ Team can immediately start sprint planning
7. ✅ `/init` can load context successfully

---

**This command transforms any codebase into a fully governed, documented project ready for development.**
