# Initial Product Backlog

**Version**: 1.1.0
**Generated**: December 22, 2025
**Updated**: December 22, 2025
**Generated By**: /bootstrap
**Status**: Active (T4)

---

## Overview

This backlog was auto-generated by analyzing the KARVIA codebase. Items are categorized by priority and type based on code analysis, TODOs found, and architectural patterns observed.

---

## P0: Critical/Blocking

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B001 | Tech Debt | Integrate LLM with manifest endpoint (currently returns mock) | TODO in code | server/routes/manifest.js:13 |
| B002 | Testing | Unit test coverage is minimal (only 3 test files) | Analysis | server/api/*.test.js |
| B003 | Security | Environment validation needed (no .env file shipped) | Analysis | config/.env.example |

---

## P1: High Priority

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B004 | Feature | Remove excessive DEBUG console.log statements from production | Analysis | client/pages/scripts/journey_progress.js |
| B005 | Tech Debt | Consolidate duplicate journey route files (journeyCore.js, journeySimple.js) | Analysis | server/routes/ |
| B006 | Tech Debt | Consolidate duplicate dream parser files (dreamParser.js, dreamParserSimple.js) | Analysis | server/routes/ |
| B007 | Documentation | Document all API endpoints with request/response schemas | Analysis | server/routes/*.js |
| B008 | Testing | Add integration tests for journey flow | Analysis | qa/automation/ |
| B009 | Feature | Add input validation to all API routes | Analysis | server/routes/*.js |
| B010 | Security | Implement rate limiting on auth endpoints | Analysis | server/routes/auth.js |

---

## P2: Medium Priority

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B011 | Tech Debt | Standardize service naming (some use camelCase, some PascalCase) | Analysis | server/services/*.js |
| B012 | Tech Debt | typo in filename: comprhensiveAnalysis.js | Analysis | server/services/comprhensiveAnalysis.js |
| B013 | Feature | Add Dockerfile for containerized deployment | Analysis | Project root |
| B014 | Documentation | Add JSDoc comments to service files | Analysis | server/services/*.js |
| B015 | Testing | Add unit tests for scoring services | Analysis | server/services/*Scoring*.js |
| B016 | Feature | Implement password reset flow | Analysis | server/routes/auth.js |
| B017 | Tech Debt | Consolidate tracking client files (tracking-client.js, trackingClient.js) | Analysis | client/pages/scripts/ |
| B018 | Feature | Add offline support / service worker | Analysis | client/ |
| B019 | Documentation | Create API documentation (Swagger/OpenAPI) | Analysis | server/routes/ |
| B020 | Tech Debt | Remove duplicate journey HTML files | Analysis | client/*.html |

---

## P3: Low Priority / Nice to Have

| ID | Type | Description | Source | Location |
|----|------|-------------|--------|----------|
| B021 | Feature | Add WebSocket support for real-time updates | Analysis | server/index.js |
| B022 | Feature | Implement caching layer (Redis) | Analysis | server/services/ |
| B023 | Documentation | Add contribution guidelines | Analysis | Project root |
| B024 | Feature | Add mobile app (React Native / Flutter) | Analysis | - |
| B025 | Testing | Add E2E tests with Playwright/Cypress | Analysis | qa/ |
| B026 | Feature | Multi-language support (i18n) | Analysis | client/ |
| B027 | Feature | Dark mode theme | Analysis | client/ |
| B028 | Feature | Export user data (GDPR compliance) | Analysis | server/routes/users.js |
| B029 | Optimization | Implement lazy loading for client scripts | Analysis | client/pages/scripts/ |
| B030 | Feature | Add notification system (push/email) | Analysis | server/services/emailService.js |

---

## New Items Discovered (Sprint Planning)

| ID | Type | Description | Source | Sprint |
|----|------|-------------|--------|--------|
| B031 | Cleanup | Clean up 449 console.log statements in server (49 files) | Analysis | 1 |
| B032 | Security | Verify helmet security headers configuration | Analysis | 1 |
| B033 | Quality | Replace console.log with proper winston/pino logger | Analysis | 1 |
| B034 | Quality | Add validation to 18 unvalidated routes (only 5 have it) | Analysis | 2 |
| B035 | Tech Debt | Consolidate shared LLM config/policy modules | Analysis | 2 |
| B036 | Quality | Add request ID to all API responses for debugging | Analysis | 2 |
| B037 | Quality | Standardize error response format across all routes | Analysis | 2 |
| B038 | Testing | Create test fixtures and factories for consistent testing | Analysis | 3 |
| B039 | Documentation | Create architecture decision records (ADRs) | Analysis | 3 |
| B040 | DevOps | Add docker-compose for local development | Analysis | 3 |
| B041 | Testing | Add API contract tests | Analysis | 3 |
| B042 | Quality | Add pre-commit hooks (lint, test) | Analysis | 3 |

---

## Categories

### Technical Debt
- B001: LLM integration mock
- B005: Duplicate journey routes
- B006: Duplicate dream parser routes
- B011: Inconsistent service naming
- B012: Filename typo
- B017: Duplicate tracking client files
- B020: Duplicate journey HTML files

### Missing Tests
- B002: Unit test coverage
- B008: Integration tests for journey
- B015: Scoring service tests
- B025: E2E tests

### Missing Documentation
- B007: API endpoint documentation
- B014: JSDoc comments
- B019: OpenAPI/Swagger docs
- B023: Contribution guidelines

### Security
- B003: Environment validation
- B010: Rate limiting on auth

### Features
- B004: Debug cleanup
- B009: Input validation
- B013: Docker support
- B016: Password reset
- B018: Offline support
- B021-B030: Various enhancements

---

## Technical Analysis Summary

### Codebase Health

| Metric | Value | Assessment |
|--------|-------|------------|
| Routes | 23 files | Good modular structure |
| Models | 10 schemas | Appropriate for MVP |
| Services | 33 files | Comprehensive but some duplication |
| Client Pages | 16 HTML | Functional, some redundancy |
| Test Coverage | 3 files | Needs improvement |
| CI/CD Pipelines | 12 workflows | Well-configured |

### Architecture Notes

1. **Monolithic Structure**: Single Express server serving both API and static files. Appropriate for MVP phase.

2. **Service Layer**: Well-structured with dedicated services for scoring, journey, vision, and AI.

3. **Database**: MongoDB with Mongoose ODM. Good schema separation.

4. **Frontend**: Vanilla JS with Tailwind CSS. Consider modern framework for growth phase.

5. **AI Integration**: Dual support for OpenAI and Ollama. Good flexibility.

---

## Sprint Planning Notes

Based on analysis, recommended first sprint focus:

### Sprint 1 Priority (MVP Stabilization)
1. **B001** - Complete LLM integration for manifest
2. **B002** - Add critical unit tests
3. **B004** - Remove debug statements
4. **B010** - Add rate limiting

### Sprint 2 Priority (Code Quality)
1. **B005/B006** - Consolidate duplicate routes
2. **B012** - Fix filename typo
3. **B017** - Consolidate tracking clients
4. **B007** - Document API endpoints

### Sprint 3 Priority (Testing & Documentation)
1. **B008** - Integration tests
2. **B014** - JSDoc comments
3. **B019** - OpenAPI documentation
4. **B015** - Scoring service tests

---

## Dependencies

| Item | Depends On | Blocks |
|------|------------|--------|
| B008 | B002 | B025 |
| B015 | B011 | - |
| B019 | B007 | - |
| B024 | B021 | - |

---

## Estimation Notes

| Category | Count | Effort Range |
|----------|-------|--------------|
| P0 Critical | 3 | 1-3 days each |
| P1 High | 7 | 0.5-2 days each |
| P2 Medium | 10 | 0.5-1 day each |
| P3 Low | 10 | Variable |
| New Items | 12 | 0.5-2 days each |
| **Total** | **42** | ~37 days |

## Sprint Allocation

| Sprint | Theme | Items | Effort |
|--------|-------|-------|--------|
| Sprint 1 | MVP Stabilization | 8 items | ~11 days |
| Sprint 2 | Code Quality | 12 items | ~12 days |
| Sprint 3 | Testing & Docs | 11 items | ~14 days |

See [SPRINT_ROADMAP.md](./SPRINT_ROADMAP.md) for full details.

---

**Document Status**: T4 Working Draft - Review and prioritize before sprint planning

---

**Session Seal**
- **Generated**: December 22, 2025
- **Command**: /bootstrap
- **Purpose**: Initial backlog generation from codebase analysis
